<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Rete di Feistel</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='des_style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        .feistel-layout {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .visual-ladder {
            flex: 1;
            min-width: 300px;
            background: #0d1117;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #30363d;
            text-align: center;
        }

        .theory-col {
            flex: 1.5;
        }

        .tag-feistel {
            background: #a371f7;
            color: #fff;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 10px;
        }

        body {
            background-color: #0d1117;
            color: #c9d1d9;
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <a href="/" class="home-btn"><i class="fas fa-arrow-left"></i> Menu</a>
            <h1>Rete di Feistel <span class="tag-feistel">Architettura</span></h1>
            <p>Il "Motore" dei Cifrari a Blocchi Storici (DES, Blowfish, CAST-128)</p>
        </header>

        <section class="section theory-section" style="margin-top: 2rem;">
            <div class="card"
                style="background: #161b22; border: 1px solid #30363d; padding: 25px; border-radius: 8px; border-top: 5px solid #a371f7;">
                <h2 style="color: #a371f7; margin-top: 0;">üèóÔ∏è Lo Scheletro (The Skeleton)</h2>
                <p>La Rete di Feistel √® un'architettura geniale che permette di costruire un cifrario
                    <strong>reversibile</strong> (decifrabile) utilizzando componenti interni (la Funzione F) che
                    <strong>NON sono reversibili</strong>.
                </p>

                <div class="feistel-layout">
                    <!-- COL 1: VISUAL LADDER -->
                    <!-- COL 1: VISUAL LADDER -->
                    <div class="visual-ladder" style="background: center;">
                        <img src="{{ url_for('static', filename='images/feistel_diagram.png') }}" alt="Feistel Diagram"
                            style="max-width: 100%; border-radius: 8px;">
                    </div>

                    <!-- COL 2: THEORY -->
                    <div class="theory-col">
                        <h3 style="color: #c9d1d9; border-bottom: 1px solid #30363d; padding-bottom: 10px;">Come
                            Funziona (Memorizza le Formule)</h3>
                        <p>Ad ogni Round \( i \), il blocco √® diviso in \( L_i \) (Sinistra) e \( R_i \) (Destra).</p>

                        <div
                            style="background: #0d1117; padding: 15px; border-radius: 6px; border-left: 4px solid #3fb950; font-family: 'JetBrains Mono'; margin-bottom: 20px;">
                            <div style="margin-bottom: 8px;">
                                <span style="color: #a371f7;">\( L_{i+1} \)</span> = <span style="color: #a371f7;">\(
                                    R_i \)</span>
                                <span style="color: #8b949e; font-size: 0.8em; margin-left: 10px;">(Copia
                                    diretta)</span>
                            </div>
                            <div>
                                <span style="color: #58a6ff;">\( R_{i+1} \)</span> = <span style="color: #58a6ff;">\(
                                    L_i \)</span> \(\oplus\) <span style="color: #f85149;">\( F(R_i, K_i) \)</span>
                                <span style="color: #8b949e; font-size: 0.8em; margin-left: 10px;">(Mix & Swap)</span>
                            </div>
                        </div>

                        <div style="margin-bottom: 25px;">
                            <h4 style="color: #c9d1d9; margin-bottom: 10px;">üîë Caratteristiche Fondamentali</h4>
                            <ul style="list-style-type: none; padding: 0; line-height: 1.6;">
                                <li style="margin-bottom: 8px;">
                                    <i class="fas fa-sync-alt" style="color: #58a6ff; width: 20px;"></i>
                                    <strong>Iterativo</strong>: La stessa struttura si ripete identica.
                                </li>
                                <li style="margin-bottom: 8px;">
                                    <i class="fas fa-key" style="color: #e3b341; width: 20px;"></i>
                                    <strong>Key Schedule</strong>: Da 1 Chiave Primaria si generano <strong>16
                                        Sottochiavi</strong> (\(K_1 \dots K_{16}\)), una per round.
                                </li>
                                <li style="margin-bottom: 8px;">
                                    <i class="fas fa-layer-group" style="color: #a371f7; width: 20px;"></i>
                                    <strong>Perch√© 16 Round?</strong> √à il trade-off ideale. Si √® notato che oltre i 16
                                    round, il guadagno di sicurezza diventa trascurabile (non conveniente).
                                </li>
                                <li>
                                    <i class="fas fa-tools" style="color: #3fb950; width: 20px;"></i>
                                    <strong>Facile & Invertibile</strong>: Facile da implementare hardware/software e
                                    invertibile per design (anche se F non lo √®).
                                </li>
                            </ul>
                        </div>

                        <h3 style="color: #e3b341;">üé© La Magia della Decifratura</h3>
                        <p><strong>Domanda d'Esame:</strong> "Devo invertire la funzione F per decifrare?"<br>
                            <strong>Risposta: NO!</strong>
                        </p>
                        <p>La Rete di Feistel √® progettata per usare <strong>lo stesso identico circuito</strong> per
                            cifrare e decifrare. <br>
                            Anche se la funzione \( F \) √® distruttiva (hash, S-Box caotiche), la struttura simmetrica
                            permette di tornare indietro semplicemente <strong>usando le chiavi in ordine
                                inverso</strong> (\(K_{16}, K_{15} \dots K_1\)).</p>

                        <h3 style="color: #c9d1d9; margin-top: 25px;">‚öîÔ∏è Feistel vs SPN (Confronto)</h3>
                        <table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
                            <thead style="background: #21262d; color: #8b949e;">
                                <tr>
                                    <th style="padding: 8px; text-align: left;">Caratteristica</th>
                                    <th style="padding: 8px; text-align: left; color: #a371f7;">Feistel (DES)</th>
                                    <th style="padding: 8px; text-align: left; color: #3fb950;">SPN (AES)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid #30363d;">
                                    <td style="padding: 8px;"><strong>Parallelismo</strong></td>
                                    <td style="padding: 8px;">Basso (Lavora su meta blocco).</td>
                                    <td style="padding: 8px;">Alto (Tutto il blocco insieme).</td>
                                </tr>
                                <tr style="border-bottom: 1px solid #30363d;">
                                    <td style="padding: 8px;"><strong>Reversibilit√†</strong></td>
                                    <td style="padding: 8px;">Funzione F <strong>NON</strong> invertibile.</td>
                                    <td style="padding: 8px;">S-Box <strong>DEVE</strong> essere invertibile.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="card" style="background: #161b22; border: 1px solid #30363d; padding: 20px;">
                <h3><i class="fas fa-lightbulb" style="color:#e3b341;"></i> Esempio Pratico</h3>
                <p>Se la funzione F fosse "moltiplicare per 0", non potresti mai tornare indietro (invertire)
                    matematicamente. <br>
                    Ma con Feistel, poich√© F √® dentro uno XOR con l'altra met√† intatta, <strong>puoi comunque
                        decifrare</strong>!</p>
            </div>
        </section>

        <div style="text-align: center; margin-top: 50px; margin-bottom: 20px;">
            <a href="/" style="text-decoration: none;">
                <button
                    style="padding: 10px 20px; font-size: 1em; background: #30363d; color: #fff; border: 1px solid #8b949e; border-radius: 6px; cursor: pointer;">
                    <i class="fas fa-arrow-left"></i> Torna al Menu
                </button>
            </a>
        </div>
    </div>
</body>

</html>